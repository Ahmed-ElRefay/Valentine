<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Our Little Love Game ğŸ’•</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,500&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --parchment:#FFF6ED;
            --parchment-dark:#F0E0CC;
            --parchment-deep:#DDC8AE;
            --cream:#FFFCF7;
            --warm-white:#FFFDF8;
            --ink:#3E2C22;
            --ink-light:#6B5040;
            --ink-faded:#A08870;
            --rose:#D48068;
            --rose-light:#EAB8A4;
            --rose-pale:#F5DDD2;
            --sage:#8EAA80;
            --sage-light:#B8CCA8;
            --butter:#E4B86A;
            --butter-light:#F2DCA0;
            --sky:#C8B498;
            --berry:#8A5040;
            --berry-light:#C48870;
            --rust:#C47850;
            --rust-light:#E0A888;
            --gold-trim:#D4A050;
            --machine-bg:#F0E0CC;
            --machine-border:#DDC8AE;
            --shadow:rgba(62,44,34,0.08);
            --shadow-lg:rgba(62,44,34,0.12);
            --honey:#E8A848;
            --honey-light:#F5D898;
            --warm-pink:#E0A098;
            --warm-pink-light:#F0CCC8;
        }
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{
            width:100%;height:100%;overflow:hidden;
            font-family:'DM Sans',sans-serif;
            background:var(--parchment);color:var(--ink);
            -webkit-tap-highlight-color:transparent;
            user-select:none;-webkit-user-select:none;
        }
        body::before{
            content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
            background:
                    radial-gradient(ellipse at 30% 20%,rgba(212,128,104,0.06) 0%,transparent 50%),
                    radial-gradient(ellipse at 70% 80%,rgba(142,170,128,0.06) 0%,transparent 50%),
                    radial-gradient(ellipse at 50% 50%,rgba(228,184,106,0.06) 0%,transparent 60%);
        }
        body::after{
            content:'';position:fixed;inset:0;pointer-events:none;z-index:0;opacity:0.2;
            background-image:radial-gradient(circle,var(--parchment-deep) 0.6px,transparent 0.6px);
            background-size:20px 20px;
        }
        .stitch{position:fixed;inset:8px;border:2px dashed var(--parchment-deep);border-radius:12px;pointer-events:none;z-index:1;opacity:0.4}
        canvas#sparks{position:fixed;inset:0;pointer-events:none;z-index:999}

        /* ===== START ===== */
        #startScreen{
            position:fixed;inset:0;z-index:100;
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            padding:32px 24px;background:var(--parchment);
            transition:opacity 0.6s,transform 0.6s;overflow-y:auto;
        }
        #startScreen.hidden{opacity:0;transform:scale(0.95);pointer-events:none}
        .s-photo{
            width:120px;height:120px;border-radius:50%;overflow:hidden;margin-bottom:14px;
            border:3px solid var(--parchment-deep);box-shadow:0 4px 20px var(--shadow-lg);
            animation:bob 3s ease-in-out infinite;background:var(--parchment-dark);
            display:flex;align-items:center;justify-content:center;
        }
        .s-photo img{width:100%;height:100%;object-fit:cover;display:block}
        .s-photo .placeholder-emoji{font-size:48px}
        @keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
        .s-title{
            font-family:'Cormorant Garamond',serif;font-size:36px;font-weight:700;
            font-style:italic;color:var(--ink);margin-bottom:4px;text-align:center;
        }
        .s-sub{font-family:'Caveat',cursive;font-size:20px;color:var(--rose);margin-bottom:6px}
        .s-name{font-family:'Caveat',cursive;font-size:26px;color:var(--ink-light);margin-bottom:20px}
        .s-desc{
            font-size:13px;color:var(--ink-faded);font-weight:500;
            text-align:center;line-height:1.8;max-width:280px;margin-bottom:24px;
        }
        .s-pills{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;justify-content:center}
        .pill{padding:5px 12px;border-radius:16px;font-size:11px;font-weight:700}
        .pill-r{background:var(--rose-pale);color:var(--berry)}
        .pill-s{background:var(--sage-light);color:#4A6A3E}
        .pill-b{background:var(--butter-light);color:#8A6A2A}
        .btn{
            font-family:'Cormorant Garamond',serif;font-size:16px;font-weight:600;
            font-style:italic;padding:14px 40px;border:none;border-radius:50px;
            cursor:pointer;touch-action:manipulation;transition:all 0.2s;letter-spacing:0.5px;
        }
        .btn:active{transform:scale(0.96)}
        .btn-main{background:var(--cream);border:1.5px solid var(--parchment-deep);color:var(--ink);box-shadow:0 2px 12px var(--shadow)}

        /* COUNTDOWN */
        .countdown-wrapper{margin-bottom:18px;text-align:center}
        .countdown-label{font-family:'Caveat',cursive;font-size:16px;color:var(--rose);margin-bottom:10px;font-weight:600}
        .countdown-boxes{display:flex;gap:8px;justify-content:center}
        .cd-box{background:var(--warm-white);border:1.5px solid var(--parchment-deep);border-radius:14px;padding:10px 6px;min-width:58px;box-shadow:0 2px 8px var(--shadow);text-align:center}
        .cd-num{font-family:'DM Sans',sans-serif;font-size:24px;font-weight:800;color:var(--berry);line-height:1;margin-bottom:2px}
        .cd-unit{font-family:'Caveat',cursive;font-size:11px;color:var(--ink-faded);font-weight:600;letter-spacing:0.5px}
        .countdown-date{font-size:11px;color:var(--ink-faded);margin-top:8px;font-weight:500;letter-spacing:0.5px}
        .countdown-date span{color:var(--rose);font-weight:700}

        /* ===== GAME ===== */
        #gameScreen{
            position:fixed;inset:0;z-index:10;display:none;flex-direction:column;
            align-items:center;justify-content:center;padding:16px;gap:0;overflow-y:auto;
        }
        #gameScreen.active{display:flex;animation:fadeUp 0.5s ease}
        @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
        .game-title{font-family:'Caveat',cursive;font-size:18px;color:var(--ink-faded);margin-bottom:6px;font-weight:600}
        .spin-count{font-family:'Caveat',cursive;font-size:14px;color:var(--rose);margin-bottom:10px}

        /* MACHINE */
        .machine{
            width:100%;max-width:340px;background:var(--cream);border:2px solid var(--machine-border);
            border-radius:24px;box-shadow:0 8px 32px var(--shadow-lg),inset 0 1px 0 rgba(255,255,255,0.6);
            overflow:hidden;
        }
        .machine-top{
            background:linear-gradient(135deg,var(--rose-pale),var(--butter-light));
            padding:12px 20px 8px;text-align:center;border-bottom:1.5px solid var(--parchment-deep);
        }
        .machine-top h2{font-family:'Caveat',cursive;font-size:16px;font-weight:600;color:var(--ink-light)}

        /* REELS */
        .reels-frame{padding:14px 16px 6px;background:var(--warm-white)}
        .reels-row{display:flex;gap:8px;justify-content:center}
        .reel-wrapper{flex:1;max-width:100px}
        .reel-container{
            width:100%;height:90px;overflow:hidden;position:relative;
            background:var(--cream);border:1.5px solid var(--parchment-deep);border-radius:14px;
            box-shadow:inset 0 2px 6px rgba(62,44,34,0.06);
        }
        .reel-container::before,.reel-container::after{content:'';position:absolute;left:0;right:0;height:18px;z-index:2;pointer-events:none}
        .reel-container::before{top:0;background:linear-gradient(to bottom,var(--cream),transparent)}
        .reel-container::after{bottom:0;background:linear-gradient(to top,var(--cream),transparent)}
        .reel{display:flex;flex-direction:column;align-items:center;transition:transform 0.8s cubic-bezier(0.2,0.8,0.3,1);will-change:transform}
        .reel-item{width:100%;height:90px;display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0;padding:4px}
        .reel-emoji{font-size:28px;margin-bottom:2px}
        .reel-label{font-family:'Caveat',cursive;font-size:11px;font-weight:600;color:var(--ink-faded);text-align:center;line-height:1.2}
        .reel-placeholder{width:100%;height:90px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
        .reel-placeholder span{font-family:'Cormorant Garamond',serif;font-size:24px;font-weight:700;font-style:italic;color:var(--parchment-deep)}
        .reel-highlight{
            position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
            width:calc(100% + 4px);height:92px;border:2px solid var(--butter);
            border-radius:16px;pointer-events:none;z-index:3;opacity:0;transition:opacity 0.3s;
        }
        .reel-highlight.show{opacity:1}

        /* RESULT */
        .machine-result{padding:0 20px 10px;text-align:center;min-height:40px;display:flex;flex-direction:column;align-items:center;justify-content:center}
        .result-media{
            width:180px;height:110px;border-radius:14px;overflow:hidden;margin-bottom:8px;
            display:none;border:1.5px solid var(--parchment-deep);box-shadow:0 2px 12px var(--shadow);
            background:var(--parchment-dark);
        }
        .result-media.show{display:block;animation:fadeUp 0.5s ease}
        .result-media img{width:100%;height:100%;object-fit:cover;display:block}
        .result-combo{font-family:'Caveat',cursive;font-size:13px;color:var(--ink-faded);margin-bottom:4px;font-weight:600;letter-spacing:0.5px;opacity:0;transition:opacity 0.4s}
        .result-combo.show{opacity:1}
        .result-message{font-family:'Cormorant Garamond',serif;font-size:16px;font-weight:600;font-style:italic;color:var(--ink);line-height:1.5;max-width:280px;opacity:0;transform:translateY(8px);transition:all 0.5s ease}
        .result-message.show{opacity:1;transform:translateY(0)}
        .result-tag{font-family:'Caveat',cursive;font-size:13px;color:var(--rose);margin-top:4px;opacity:0;transition:opacity 0.4s 0.2s}
        .result-tag.show{opacity:1}

        /* LEVER */
        .lever-area{padding:6px 20px 14px;display:flex;justify-content:center}
        .lever-btn{
            font-family:'Caveat',cursive;font-size:18px;font-weight:700;padding:14px 48px;
            background:linear-gradient(135deg,var(--rose),var(--berry-light));
            color:white;border:none;border-radius:50px;cursor:pointer;touch-action:manipulation;
            box-shadow:0 4px 16px rgba(212,128,104,0.3);transition:all 0.2s;letter-spacing:0.5px;
        }
        .lever-btn:active{transform:scale(0.95)}
        .lever-btn:disabled{opacity:0.5;pointer-events:none}
        .lever-btn.glow{animation:leverGlow 1.5s ease-in-out infinite}
        @keyframes leverGlow{0%,100%{box-shadow:0 4px 16px rgba(212,128,104,0.3)}50%{box-shadow:0 4px 28px rgba(212,128,104,0.5)}}

        /* HISTORY */
        .history{width:100%;max-width:340px;margin-top:10px;max-height:90px;overflow-y:auto;-webkit-overflow-scrolling:touch}
        .history::-webkit-scrollbar{display:none}
        .history-item{display:flex;align-items:center;gap:8px;padding:7px 12px;background:rgba(255,246,237,0.7);border-radius:12px;margin-bottom:5px;animation:histSlide 0.3s ease;border:1px solid var(--parchment-dark)}
        @keyframes histSlide{from{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}
        .hist-emojis{font-size:13px;white-space:nowrap}
        .hist-text{font-size:11px;color:var(--ink-light);font-weight:500;line-height:1.3;flex:1}

        /* JACKPOT */
        #jackpotOverlay{position:fixed;inset:0;z-index:500;display:none;align-items:center;justify-content:center;padding:24px}
        #jackpotOverlay.active{display:flex;animation:fadeUp 0.5s ease}
        .jackpot-backdrop{position:absolute;inset:0;background:rgba(62,44,34,0.4);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
        .jackpot-card{position:relative;z-index:2;background:var(--cream);border-radius:24px;padding:32px 24px;max-width:320px;width:100%;text-align:center;box-shadow:0 12px 48px rgba(62,44,34,0.2);border:1.5px solid var(--butter);animation:jpPop 0.6s cubic-bezier(0.34,1.56,0.64,1)}
        @keyframes jpPop{from{transform:scale(0.7);opacity:0}to{transform:scale(1);opacity:1}}
        .jackpot-card::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;border-radius:24px 24px 0 0;background:linear-gradient(90deg,var(--rose-light),var(--butter),var(--sage-light))}
        .jp-emoji{font-size:52px;margin-bottom:8px}
        .jp-title{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:700;font-style:italic;color:var(--ink);margin-bottom:12px}
        .jp-text{font-family:'Cormorant Garamond',serif;font-size:16px;font-style:italic;color:var(--ink-light);line-height:1.8;margin-bottom:16px}
        .jp-note{font-family:'Caveat',cursive;font-size:16px;color:var(--rose);margin-bottom:20px}
        .jp-close{font-family:'Caveat',cursive;font-size:15px;padding:10px 28px;background:transparent;border:1.5px solid var(--parchment-deep);border-radius:50px;color:var(--ink-faded);cursor:pointer;touch-action:manipulation}
        .jp-close:active{background:var(--parchment)}
    </style>
</head>
<body>
<div class="stitch"></div>
<canvas id="sparks"></canvas>

<!-- START -->
<div id="startScreen">
    <div class="s-photo">
        <img src="photo.jpg" alt="Us" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
        <div class="placeholder-emoji" style="display:none">ğŸ’•</div>
    </div>
    <div class="s-title">Our Little Love Game</div>
    <div class="s-sub">every spin you win because I already did</div>
    <div class="s-name">~ made with love for my Tamtam ~</div>
    <div class="countdown-wrapper">
        <div class="countdown-label">Counting down to forever...</div>
        <div class="countdown-boxes">
            <div class="cd-box"><div class="cd-num" id="cdDays">--</div><div class="cd-unit">days</div></div>
            <div class="cd-box"><div class="cd-num" id="cdHours">--</div><div class="cd-unit">hours</div></div>
            <div class="cd-box"><div class="cd-num" id="cdMins">--</div><div class="cd-unit">mins</div></div>
            <div class="cd-box"><div class="cd-num" id="cdSecs">--</div><div class="cd-unit">secs</div></div>
        </div>
        <div class="countdown-date">March 24, 2026 Â· <span>Our Wedding Day</span> ğŸ’•</div>
    </div>
    <div class="s-pills">
        <span class="pill pill-r">Compliments</span>
        <span class="pill pill-s">Date ideas</span>
        <span class="pill pill-b">Sweet nothings</span>
    </div>
    <div class="s-desc">Pull the lever â€” the first slot picks a setting, which narrows the second slot, which narrows the third. Every combo makes perfect sense. And you can't lose.</div>
    <button class="btn btn-main" onclick="startGame()">Pull the Lever</button>
</div>

<!-- GAME -->
<div id="gameScreen">
    <div class="game-title">âœ¦ Our Little Love Game âœ¦</div>
    <div class="spin-count" id="spinCount">Spin #1</div>
    <div class="machine">
        <div class="machine-top"><h2>Where every moment with you is a win</h2></div>
        <div class="reels-frame"><div class="reels-row">
            <div class="reel-wrapper"><div class="reel-container"><div class="reel" id="reel0"></div><div class="reel-highlight" id="hl0"></div></div></div>
            <div class="reel-wrapper"><div class="reel-container"><div class="reel" id="reel1"></div><div class="reel-highlight" id="hl1"></div></div></div>
            <div class="reel-wrapper"><div class="reel-container"><div class="reel" id="reel2"></div><div class="reel-highlight" id="hl2"></div></div></div>
        </div></div>
        <div class="machine-result">
            <div class="result-media" id="resultMedia"><img id="resultImg" src="" alt=""></div>
            <div class="result-combo" id="resultCombo"></div>
            <div class="result-message" id="resultMsg"></div>
            <div class="result-tag" id="resultTag"></div>
        </div>
        <div class="lever-area"><button class="lever-btn glow" id="leverBtn" onclick="spin()">Pull!</button></div>
    </div>
    <div class="history" id="history"></div>
</div>

<!-- JACKPOT -->
<div id="jackpotOverlay">
    <div class="jackpot-backdrop" onclick="closeJackpot()"></div>
    <div class="jackpot-card">
        <div class="jp-emoji" id="jpEmoji"></div>
        <div class="jp-title" id="jpTitle"></div>
        <div class="jp-text" id="jpText"></div>
        <div class="jp-note" id="jpNote"></div>
        <button class="jp-close" onclick="closeJackpot()">keep spinning âœ¦</button>
    </div>
</div>

<script>
    // ============ YOUR SETTINGS & ACTIVITIES (with proper icons) ============
    const SETTINGS = [
        {id:'cozy',      emoji:'ğŸ¡', label:'Stay home'},
        {id:'night',     emoji:'ğŸŒ™', label:'Late night'},
        {id:'morning',   emoji:'ğŸŒ…', label:'Morning'},
        {id:'rainy',     emoji:'ğŸŒ§ï¸', label:'Rainy day'},
        {id:'adventure', emoji:'ğŸš—', label:'Road trip'},
    ];

    const ACTIVITIES = {
        cozy: [
            {id:'cook',     emoji:'ğŸ‘©â€ğŸ³', label:'Cooking Together'},
            {id:'cookToYou',emoji:'ğŸ³',  label:'Cooking for you'},
            {id:'bake',     emoji:'ğŸ§',  label:'Bake Together'},
            {id:'movie',    emoji:'ğŸ¬',  label:'Movie night'},
            {id:'cuddle',   emoji:'ğŸ¤—',  label:'Cuddle session'},
            {id:'tea',      emoji:'ğŸµ',  label:'Make mint tea for you'},
            {id:'self',     emoji:'ğŸ§–',  label:'Self care session together'},
            {id:'makeup',   emoji:'ğŸ’„',  label:'Put makeup on you'},
            {id:'massage',  emoji:'ğŸ’†',  label:'Massage session'},
            {id:'drawing',  emoji:'ğŸ¨',  label:'Drawing with you'},
        ],
        night: [
            {id:'movie',    emoji:'ğŸ¬',  label:'Movie night'},
            {id:'talk',     emoji:'ğŸ’¬',  label:'Deep talks'},
            {id:'drive',    emoji:'ğŸš—',  label:'Night drive'},
            {id:'cinema',   emoji:'ğŸ¥',  label:'Midnight Cinema'},
            {id:'music',    emoji:'ğŸµ',  label:'Chilling music'},
            {id:'cook',     emoji:'ğŸ‘©â€ğŸ³', label:'Cooking Together'},
            {id:'self',     emoji:'ğŸ§–',  label:'Self care session together'},
            {id:'massage',  emoji:'ğŸ’†',  label:'Massage session'},
            {id:'fancy',    emoji:'ğŸ•¯ï¸',  label:'Fancy home date'},
            {id:'outdoor',  emoji:'ğŸ½ï¸',  label:'Taking you out for dinner'},
            {id:'lazy',     emoji:'ğŸ˜´',  label:'Just a lazy night in bed'},
            {id:'game',     emoji:'ğŸ®',  label:'Gaming together'},
        ],
        morning: [
            {id:'breakfastSpecial', emoji:'â˜•', label:'Breakfast in bed for you'},
            {id:'walk',     emoji:'ğŸš¶',  label:'Morning walk Together'},
            {id:'breakfast',emoji:'ğŸ¥',  label:'Making breakfast for you'},
            {id:'slow',     emoji:'ğŸ˜Œ',  label:'Just a slow Morning in bed'},
        ],
        rainy: [
            {id:'bake',     emoji:'ğŸ§',  label:'Baking Together'},
            {id:'movie',    emoji:'ğŸ¬',  label:'Movie night While raining'},
            {id:'walk',     emoji:'â˜”',   label:'Walking outside'},
            {id:'tea',      emoji:'ğŸµ',  label:'Make tea for you (With mint i know for sure)'},
            {id:'game',     emoji:'ğŸ®',  label:'Gaming together'},
            {id:'cuddle',   emoji:'ğŸ¤—',  label:'Cuddle and watch rain together'},
            {id:'drive',    emoji:'ğŸš—',  label:'Rainy car ride'},
        ],
        adventure: [
            {id:'food',     emoji:'ğŸœ',  label:'Trying street food'},
            {id:'drive',    emoji:'ğŸ›£ï¸',  label:'Going on a road trip together'},
        ],
    };

    // ============ FINISHERS (3 per activity) ============
    const FINISHERS = {
        cook:    [{emoji:'ğŸ¶',label:'With our playlist on'},{emoji:'ğŸ˜‚',label:'Making a mess together'},{emoji:'ğŸ¤',label:'Feeding each other'}],
        cookToYou:[{emoji:'ğŸ¥°',label:'Your favorite dish'},{emoji:'ğŸ•¯ï¸',label:'Candlelit table set'},{emoji:'ğŸ’‹',label:'Served with a kiss'}],
        bake:    [{emoji:'ğŸª',label:'Cookies from scratch'},{emoji:'ğŸ¤',label:'Frosting fight'},{emoji:'ğŸ“¸',label:'Taking cute flour photos'}],
        movie:   [{emoji:'ğŸ¿',label:'Popcorn & snacks'},{emoji:'ğŸ§¸',label:'Under a blanket'},{emoji:'ğŸ¤—',label:'Head on my shoulder'}],
        cuddle:  [{emoji:'ğŸ§¸',label:'With fuzzy blankets'},{emoji:'ğŸ¶',label:'Lo-fi playing softly'},{emoji:'ğŸ’•',label:'Whispering sweet nothings'}],
        tea:     [{emoji:'ğŸª',label:'With biscuits on the side'},{emoji:'ğŸ¤—',label:'Hands wrapped around the mug'},{emoji:'ğŸ’¬',label:'While talking about everything'}],
        self:    [{emoji:'ğŸ§´',label:'Face masks on'},{emoji:'ğŸ•¯ï¸',label:'Candles everywhere'},{emoji:'ğŸ¶',label:'Spa playlist vibes'}],
        makeup:  [{emoji:'ğŸ˜‚',label:'You judging my skills'},{emoji:'ğŸ“¸',label:'Before & after photos'},{emoji:'ğŸ’‹',label:'Ending with a kiss'}],
        massage: [{emoji:'ğŸ•¯ï¸',label:'Scented candles lit'},{emoji:'ğŸ¶',label:'Soft music playing'},{emoji:'ğŸ˜Œ',label:'Until you fall asleep'}],
        drawing: [{emoji:'ğŸ–¼ï¸',label:'Drawing each other'},{emoji:'ğŸ˜‚',label:'No matter how bad it looks'},{emoji:'ğŸ¤',label:'Framing it after'}],
        talk:    [{emoji:'ğŸŒ™',label:'Until the sun comes up'},{emoji:'ğŸ¤',label:'Holding hands'},{emoji:'â˜•',label:'Over warm drinks'}],
        drive:   [{emoji:'ğŸ¶',label:'Windows down, music up'},{emoji:'ğŸŒƒ',label:'City lights tour'},{emoji:'ğŸ¦',label:'Stopping for late snacks'}],
        cinema:  [{emoji:'ğŸ¿',label:'Biggest popcorn bucket'},{emoji:'ğŸ¤—',label:'Arm around you the whole time'},{emoji:'ğŸŒ™',label:'Walking home under the stars'}],
        music:   [{emoji:'ğŸ§',label:'Sharing earbuds'},{emoji:'ğŸ’ƒ',label:'Slow dancing in the room'},{emoji:'ğŸ•¯ï¸',label:'Fairy lights on'}],
        fancy:   [{emoji:'ğŸ•¯ï¸',label:'Candles and flowers'},{emoji:'ğŸ·',label:'Something special to drink'},{emoji:'ğŸ’ƒ',label:'Dancing in the living room'}],
        outdoor: [{emoji:'ğŸŒƒ',label:'Somewhere with a view'},{emoji:'ğŸ¤',label:'Just looking at you all night'},{emoji:'ğŸš¶',label:'Walking home hand in hand'}],
        lazy:    [{emoji:'ğŸ“±',label:'Scrolling reels together'},{emoji:'ğŸ˜´',label:'Alarm OFF forever'},{emoji:'ğŸ¤—',label:'Tangled up in each other'}],
        game:    [{emoji:'ğŸ˜‚',label:'Loser makes dinner'},{emoji:'ğŸ•',label:'Snacks everywhere'},{emoji:'ğŸ’‹',label:'Winner gets kisses'}],
        breakfastSpecial:[{emoji:'ğŸ¥',label:'With fresh croissants'},{emoji:'ğŸŒ¹',label:'A flower on the tray'},{emoji:'ğŸ’‹',label:'And a good morning kiss'}],
        walk:    [{emoji:'â˜•',label:'Stopping for coffee'},{emoji:'ğŸ“¸',label:'Taking silly photos'},{emoji:'ğŸ¤',label:'Hand in hand the whole way'}],
        breakfast:[{emoji:'ğŸ¥',label:'Pancakes & syrup'},{emoji:'ğŸ¶',label:'Music in the kitchen'},{emoji:'ğŸ¤',label:'You watching me cook'}],
        slow:    [{emoji:'â˜•',label:'Coffee brought to bed'},{emoji:'ğŸ¤—',label:'Not letting go'},{emoji:'ğŸ˜Œ',label:'No plans, no rush'}],
        food:    [{emoji:'ğŸ¤¤',label:'Trying everything we see'},{emoji:'ğŸ“¸',label:'Photos before we eat'},{emoji:'ğŸ¤',label:'Sharing every single bite'}],
    };

    // ============ RESULT MEDIA per setting ============
    // ğŸ› ï¸ Replace these URLs with your own photos or gifs!
    // For local photos: put them in the same folder and use e.g. "cozy.jpg"
    // For gifs: use any direct image URL
    const RESULT_MEDIA = {
        cozy:      'https://media.giphy.com/media/llmZp6fCVb4ju/giphy.gif',
        night:     'https://media.giphy.com/media/demgpwJ6rs2DS/giphy.gif',
        morning:   'https://media.giphy.com/media/3oEjHGnY8oB4BHVTP2/giphy.gif',
        rainy:     'https://media.giphy.com/media/t7Qb8655Z1VfBGr5XB/giphy.gif',
        adventure: 'https://media.giphy.com/media/3o7btQ8jDTPGDpgc6I/giphy.gif',
    };

    const SETTING_MESSAGES = {
        cozy:[
            {text:"Home with you is my favorite place in the world.",tag:'Homebody goals ğŸ¡'},
            {text:"Who needs the world when I have you and our couch?",tag:'Stay-in date: activated âœ“'},
            {text:"This is literally my dream evening. Just us.",tag:'Cozy forever ğŸ¤'},
        ],
        night:[
            {text:"Late nights with you hit completely different.",tag:'Our hours: after midnight ğŸŒ™'},
            {text:"The world goes quiet but we're just getting started.",tag:'Night owls in love'},
            {text:"The best things happen when it's just us and the night.",tag:'2am energy âœ¨'},
        ],
        morning:[
            {text:"Mornings are only worth waking up for because of you.",tag:'My reason to wake up â˜€ï¸'},
            {text:"Starting the day next to you makes everything better.",tag:'The softest mornings'},
            {text:"Every morning with you feels like a gift.",tag:'Good morning beautiful ğŸŒ…'},
        ],
        rainy:[
            {text:"Rainy days were literally invented for us.",tag:'Our kind of weather ğŸŒ§ï¸'},
            {text:"Rain outside, warmth inside. All we need.",tag:'Perfect storm ğŸ’•'},
            {text:"I hope it rains just so we can do this.",tag:'Rain lovers forever'},
        ],
        adventure:[
            {text:"Let's go somewhere new and make it ours.",tag:'Adventure loading... ğŸ—ºï¸'},
            {text:"The destination doesn't matter â€” you're my favorite place.",tag:'You are the destination'},
            {text:"New places, same butterflies when I look at you.",tag:'Wanderlust for two âœ¨'},
        ],
    };

    const JACKPOTS = [
        {emoji:'ğŸ’•ğŸ’•ğŸ’•',title:'LOVE JACKPOT!',text:'The machine says what we already know â€” this love is the real deal.',note:'You hit the jackpot the day I met you ğŸ¤'},
        {emoji:'âœ¨âœ¨âœ¨',title:'MAGIC COMBO!',text:"Everything we do together turns into something magical.",note:'You are the magic, Tamtam âœ¨'},
        {emoji:'ğŸ‰ğŸ‰ğŸ‰',title:'CELEBRATION!',text:'Every moment with you is worth celebrating.',note:'Every day with you is a holiday ğŸŠ'},
    ];

    const PLACEHOLDERS = ['I','Love','You'];

    // ============ STATE ============
    let spinning=false, spinNum=0;
    let chosenSetting=null, chosenActivity=null, chosenFinisher=null;

    // ============ PARTICLES ============
    const sCanvas=document.getElementById('sparks'),sCtx=sCanvas.getContext('2d');let parts=[];
    function resizeC(){sCanvas.width=innerWidth;sCanvas.height=innerHeight}resizeC();addEventListener('resize',resizeC);
    function spawnSparks(x,y,count=10){
        const cols=['#D48068','#8EAA80','#E4B86A','#C8B498','#E0A098','#EAB8A4'];
        for(let i=0;i<count;i++){const a=(i/count)*Math.PI*2+Math.random()*0.5,sp=1.5+Math.random()*3;
            parts.push({x,y,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp-1.5,size:3+Math.random()*4,life:1,decay:0.015+Math.random()*0.01,color:cols[Math.floor(Math.random()*cols.length)]});}
    }
    function spawnBig(){for(let i=0;i<40;i++)setTimeout(()=>spawnSparks(sCanvas.width*(0.2+Math.random()*0.6),sCanvas.height*(0.2+Math.random()*0.5),5),i*40)}
    function animP(){sCtx.clearRect(0,0,sCanvas.width,sCanvas.height);for(let i=parts.length-1;i>=0;i--){const p=parts[i];p.x+=p.vx;p.y+=p.vy;p.vy+=0.06;p.vx*=0.99;p.life-=p.decay;if(p.life<=0){parts.splice(i,1);continue}sCtx.globalAlpha=p.life*0.8;sCtx.fillStyle=p.color;sCtx.beginPath();sCtx.arc(p.x,p.y,p.size,0,Math.PI*2);sCtx.fill();sCtx.globalAlpha=p.life*0.25;sCtx.fillStyle='#fff';sCtx.beginPath();sCtx.arc(p.x,p.y,p.size*0.35,0,Math.PI*2);sCtx.fill()}sCtx.globalAlpha=1;requestAnimationFrame(animP)}animP();

    // ============ REEL BUILDING ============
    function buildReel(el,items,phText){
        el.innerHTML='';
        const ph=document.createElement('div');ph.className='reel-placeholder';
        ph.innerHTML=`<span>${phText}</span>`;el.appendChild(ph);
        for(let c=0;c<5;c++) items.forEach(item=>{
            const d=document.createElement('div');d.className='reel-item';
            d.innerHTML=`<div class="reel-emoji">${item.emoji}</div><div class="reel-label">${item.label}</div>`;
            el.appendChild(d);
        });
    }
    function showPlaceholders(){
        buildReel(document.getElementById('reel0'),SETTINGS,PLACEHOLDERS[0]);
        buildReel(document.getElementById('reel1'),ACTIVITIES[SETTINGS[0].id],PLACEHOLDERS[1]);
        buildReel(document.getElementById('reel2'),FINISHERS[ACTIVITIES[SETTINGS[0].id][0].id],PLACEHOLDERS[2]);
        for(let r=0;r<3;r++){const el=document.getElementById('reel'+r);el.style.transition='none';el.style.transform='translateY(0)'}
    }

    // ============ SPIN ============
    function spin(){
        if(spinning)return;spinning=true;spinNum++;
        document.getElementById('spinCount').textContent=`Spin #${spinNum}`;
        const btn=document.getElementById('leverBtn');btn.disabled=true;btn.classList.remove('glow');btn.textContent='Spinning...';
        // Hide prev
        ['resultCombo','resultMsg','resultTag'].forEach(id=>document.getElementById(id).classList.remove('show'));
        document.getElementById('resultMedia').classList.remove('show');
        ['hl0','hl1','hl2'].forEach(id=>document.getElementById(id).classList.remove('show'));
        const H=90;

        // REEL 1
        const si=Math.floor(Math.random()*SETTINGS.length);chosenSetting=SETTINGS[si];
        buildReel(document.getElementById('reel0'),SETTINGS,PLACEHOLDERS[0]);
        const r0=document.getElementById('reel0');r0.style.transition='none';r0.style.transform='translateY(0)';
        setTimeout(()=>{r0.style.transition='transform 1200ms cubic-bezier(0.15,0.85,0.25,1)';r0.style.transform=`translateY(${-(1+2*SETTINGS.length+si)*H}px)`},50);

        // REEL 2
        setTimeout(()=>{
            const acts=ACTIVITIES[chosenSetting.id];const ai=Math.floor(Math.random()*acts.length);chosenActivity=acts[ai];
            buildReel(document.getElementById('reel1'),acts,PLACEHOLDERS[1]);
            const r1=document.getElementById('reel1');r1.style.transition='none';r1.style.transform='translateY(0)';
            setTimeout(()=>{r1.style.transition='transform 1000ms cubic-bezier(0.15,0.85,0.25,1)';r1.style.transform=`translateY(${-(1+2*acts.length+ai)*H}px)`},50);
        },1300);

        // REEL 3
        setTimeout(()=>{
            const fins=FINISHERS[chosenActivity.id];const fi=Math.floor(Math.random()*fins.length);chosenFinisher=fins[fi];
            buildReel(document.getElementById('reel2'),fins,PLACEHOLDERS[2]);
            const r2=document.getElementById('reel2');r2.style.transition='none';r2.style.transform='translateY(0)';
            setTimeout(()=>{r2.style.transition='transform 800ms cubic-bezier(0.15,0.85,0.25,1)';r2.style.transform=`translateY(${-(1+2*fins.length+fi)*H}px)`},50);
        },2400);

        setTimeout(()=>showResult(),3500);
    }

    function showResult(){
        ['hl0','hl1','hl2'].forEach((id,i)=>setTimeout(()=>document.getElementById(id).classList.add('show'),i*100));
        const rect=document.querySelector('.reels-frame').getBoundingClientRect();
        spawnSparks(rect.left+rect.width/2,rect.top+rect.height/2,15);

        // Media
        const url=RESULT_MEDIA[chosenSetting.id];
        if(url){const img=document.getElementById('resultImg');img.src=url;img.onload=()=>document.getElementById('resultMedia').classList.add('show');img.onerror=()=>document.getElementById('resultMedia').classList.remove('show')}

        const msgs=SETTING_MESSAGES[chosenSetting.id];const msg=msgs[Math.floor(Math.random()*msgs.length)];
        const combo=document.getElementById('resultCombo');
        combo.textContent=`${chosenSetting.emoji} ${chosenSetting.label}  +  ${chosenActivity.emoji} ${chosenActivity.label}  +  ${chosenFinisher.emoji} ${chosenFinisher.label}`;
        setTimeout(()=>combo.classList.add('show'),100);
        setTimeout(()=>{document.getElementById('resultMsg').textContent=msg.text;document.getElementById('resultMsg').classList.add('show')},300);
        setTimeout(()=>{document.getElementById('resultTag').textContent=msg.tag;document.getElementById('resultTag').classList.add('show')},500);
        addHistory();
        if(spinNum%5===0)setTimeout(()=>showJackpot(),1200);

        // Reset to placeholders after viewing
        setTimeout(()=>{
            spinning=false;const btn=document.getElementById('leverBtn');btn.disabled=false;btn.classList.add('glow');btn.textContent='Pull Again!';
            for(let r=0;r<3;r++){const el=document.getElementById('reel'+r);el.style.transition='transform 600ms cubic-bezier(0.4,0,0.2,1)';el.style.transform='translateY(0)'}
        },3500);
    }

    function addHistory(){
        const h=document.getElementById('history'),el=document.createElement('div');el.className='history-item';
        el.innerHTML=`<div class="hist-emojis">${chosenSetting.emoji}${chosenActivity.emoji}${chosenFinisher.emoji}</div><div class="hist-text">${chosenSetting.label} + ${chosenActivity.label} + ${chosenFinisher.label}</div>`;
        h.prepend(el);while(h.children.length>10)h.removeChild(h.lastChild);
    }
    function showJackpot(){const j=JACKPOTS[Math.floor(Math.random()*JACKPOTS.length)];document.getElementById('jpEmoji').textContent=j.emoji;document.getElementById('jpTitle').textContent=j.title;document.getElementById('jpText').textContent=j.text;document.getElementById('jpNote').textContent=j.note;document.getElementById('jackpotOverlay').classList.add('active');spawnBig()}
    function closeJackpot(){document.getElementById('jackpotOverlay').classList.remove('active')}

    function startGame(){
        document.getElementById('startScreen').classList.add('hidden');
        setTimeout(()=>{document.getElementById('startScreen').style.display='none';document.getElementById('gameScreen').classList.add('active');showPlaceholders()},500);
    }

    // ============ COUNTDOWN â€” March 24, 2026 4PM Cairo (UTC+2) ============
    const WD=new Date('2026-03-24T16:00:00+02:00');
    function uc(){const d=WD-new Date();if(d<=0){document.getElementById('cdDays').textContent='0';document.getElementById('cdHours').textContent='0';document.getElementById('cdMins').textContent='0';document.getElementById('cdSecs').textContent='0';document.querySelector('.countdown-label').textContent='Today is the day! ğŸ’•';return}
        document.getElementById('cdDays').textContent=Math.floor(d/864e5);document.getElementById('cdHours').textContent=String(Math.floor(d%864e5/36e5)).padStart(2,'0');document.getElementById('cdMins').textContent=String(Math.floor(d%36e5/6e4)).padStart(2,'0');document.getElementById('cdSecs').textContent=String(Math.floor(d%6e4/1e3)).padStart(2,'0')}
    uc();setInterval(uc,1000);
</script>
</body>
</html>
